var setting={data:{simpleData:{enable:true}},callback:{beforeClick:function(c,b){var a=$.fn.zTree.getZTreeObj("tree");if(b.isParent){a.expandNode(b);return false}else{$("#newframe").attr("src","../"+b.file);return true}}}};var menuTree=[{moduleId:1,pModuleId:0,moduleName:"技术平台",depth:10,smallPic:"",bigPic:"",children:[{moduleId:11,pModuleId:1,moduleName:"平台管理",depth:0,smallPic:"frame/images/s1.png",bigPic:"frame/images/n1.png",children:[{id:12,pId:0,name:"应用注册",file:"app/appUI"},{id:12,pId:0,name:"自定义应用管理",file:"app/customAppUI"},{id:1,pId:0,name:"菜单维护与管理",file:"menuManage/indexUI"}]},{moduleId:12,pModuleId:1,moduleName:"用户管理",depth:0,smallPic:"frame/images/s2.png",bigPic:"frame/images/n2.png",children:[{id:20,pId:0,name:"用户管理",file:"homepage/loginUI"},{id:18,pId:0,name:"角色管理",file:"role/roleList"},{id:19,pId:0,name:"角色组管理",file:"roleGroup/roleGroupList"}]},{moduleId:13,pModuleId:1,moduleName:"系统运营管理",depth:0,smallPic:"frame/images/s3.png",bigPic:"frame/images/n3.png",children:[{id:1,pId:0,name:"客户管理与授权",file:"legelPerson/manageAndPermitUI",open:true},{id:2,pId:0,name:"应用业务授权委托",file:"legelPerson/indexUI"}]}],commonUses:[{moduleId:11,pModuleId:1,moduleName:"权限管理",depth:0,smallPic:"",bigPic:"frame/images/n1.png"},{moduleId:12,pModuleId:1,moduleName:"用户管理",depth:0,smallPic:"",bigPic:"frame/images/n2.png"},{moduleId:11,pModuleId:1,moduleName:"权限管理",depth:0,smallPic:"",bigPic:"frame/images/n3.png"}]},{moduleId:2,pModuleId:0,moduleName:"资金清算",depth:10,smallPic:"",bigPic:"",children:[{moduleId:11,pModuleId:1,moduleName:"资金划拨",depth:0,smallPic:"frame/images/s4.png",bigPic:"",children:[{id:1,pId:0,name:"呵呵 - 展开",open:true},{id:11,pId:1,name:"父节点11 - 折叠"},{id:113,pId:11,name:"叶子节点113"},{id:114,pId:11,name:"叶子节点114"},{id:12,pId:1,name:"父节点12 - 折叠"},{id:123,pId:12,name:"叶子节点123"},{id:124,pId:12,name:"叶子节点124"},{id:13,pId:1,name:"父节点13 - 没有子节点",isParent:true},{id:2,pId:0,name:"父节点2 - 折叠"},{id:21,pId:2,name:"父节点21 - 展开",open:true},{id:211,pId:21,name:"叶子节点211"},{id:212,pId:21,name:"叶子节点212"},{id:213,pId:21,name:"叶子节点213"},{id:214,pId:21,name:"叶子节点214"},{id:22,pId:2,name:"父节点22 - 折叠"},{id:223,pId:22,name:"叶子节点223"},{id:224,pId:22,name:"叶子节点224"},{id:23,pId:2,name:"父节点23 - 折叠"},{id:234,pId:23,name:"叶子节点234"},{id:3,pId:0,name:"父节点3 - 没有子节点",isParent:true,open:true}]},{moduleId:12,pModuleId:1,moduleName:"用户管理",depth:0,smallPic:"frame/images/s5.png",bigPic:""},{moduleId:13,pModuleId:1,moduleName:"角色管理",depth:0,smallPic:"frame/images/s1.png",bigPic:""}],commonUses:[{moduleId:11,pModuleId:1,moduleName:"权限管理",depth:0,smallPic:"",bigPic:"frame/images/n4.png"},{moduleId:12,pModuleId:1,moduleName:"用户管理",depth:0,smallPic:"",bigPic:"frame/images/n5.png"},{moduleId:11,pModuleId:1,moduleName:"权限管理",depth:0,smallPic:"",bigPic:"frame/images/n6.png"}]},{moduleId:3,pModuleId:0,moduleName:"卡务平台",Depth:10,smallPic:"",bigPic:"",children:[{moduleId:311,pModuleId:3,moduleName:"卡片公用功能管理",depth:0,smallPic:"frame/images/s1.png",bigPic:"frame/images/n1.png",children:[{id:3111,pId:0,name:"打印设置",file:"card/dysz/"},{id:3112,pId:0,name:"证件打印",file:"card/zjdy/"},{id:3113,pId:0,name:"证件打印模板设计",file:"card/zjdymbsj/"},{id:3114,pId:0,name:"照片采集",file:"card/zpcj/"}]},{moduleId:312,pModuleId:3,moduleName:"消费卡管理",depth:0,smallPic:"frame/images/s2.png",bigPic:"frame/images/n2.png",children:[{id:3121,pId:0,name:"充值撤销",file:"card/czcx/"},{id:3122,pId:0,name:"发消费卡",file:"card/fxfk/"},{id:3123,pId:0,name:"客户信息批量导入",file:"card/khxxpldr/"},{id:3124,pId:0,name:"钱包充值",file:"card/qbcz/"},{id:3125,pId:0,name:"消费卡挂失",file:"card/xfkgs/"},{id:3126,pId:0,name:"消费卡换卡",file:"card/xfkhk/"},{id:3127,pId:0,name:"小票打印",file:"card/xpdy/"}]},{moduleId:313,pModuleId:3,moduleName:"功能卡管理",depth:0,smallPic:"frame/images/s3.png",bigPic:"frame/images/n3.png"}],commonUses:[{moduleId:11,pModuleId:1,moduleName:"权限管理",depth:0,smallPic:"",bigPic:"frame/images/n7.png"},{moduleId:12,pModuleId:1,moduleName:"用户管理",depth:0,smallPic:"",bigPic:"frame/images/n8.png"},{moduleId:11,pModuleId:1,moduleName:"权限管理",depth:0,smallPic:"",bigPic:"frame/images/n9.png"}]},{moduleId:4,pModuleId:0,moduleName:"运营平台",Depth:10,smallPic:"",bigPic:"",children:[{moduleId:11,pModuleId:1,moduleName:"权限管理",depth:0,smallPic:"",bigPic:""},{moduleId:12,pModuleId:1,moduleName:"用户管理",depth:0,smallPic:"",bigPic:""},{moduleId:13,pModuleId:1,moduleName:"角色管理",depth:0,smallPic:"",bigPic:""}],commonUses:[{moduleId:11,pModuleId:1,moduleName:"权限管理",depth:0,smallPic:"",bigPic:"frame/images/n10.png"},{moduleId:12,pModuleId:1,moduleName:"用户管理",depth:0,smallPic:"",bigPic:"frame/images/n11.png"},{moduleId:11,pModuleId:1,moduleName:"权限管理",depth:0,smallPic:"",bigPic:"frame/images/n12.png"}]}];function showAccordion(a){var d=menuTree[a];var c=d.children,e;var b=[];for(i=0,j=c.length;i<j;i++){e=c[i];b.push("<div class='panel panel-default'>");b.push("<div class='panel-heading'>");b.push("<h4 class='panel-title'>");b.push("<a data-toggle='collapse' data-toggle='collapse' data-parent='#accordion' href='#m"+e.moduleId+"'>");b.push("<img src='"+_envRoot+"/styles/css/foundation/win8/v1.0/css/"+e.smallPic+"' alt='' />"+e.moduleName+"</a>");b.push("</h4>");b.push("</div>");b.push("<div id='m"+e.moduleId+"' class='panel-collapse collapse'>");b.push("<div class='panel-body'>");b.push('<div id="t'+e.moduleId+'" class="ztree"></div>');b.push("</div>");b.push("</div>");b.push("</div>")}$("#accordion").html(b.join(""));for(i=0,j=c.length;i<j;i++){e=c[i];$.fn.zTree.init($("#t"+e.moduleId),setting,e.children)}$(".panel-body").height($(window).height()-228)}function showModule(a){$.ajax({url:_envRoot+"/scripts/foundation/win8/v2.0/c"+a+".json",type:"GET",dataType:"json",data:{mod_id:a}}).done(function(e){var d=e,c=d[0];console.log(c);showMenu(c);var b=[];for(i=0,j=d.length;i<j;i++){c=d[i];b.push("<li><a href=\"javascript:showMenu({moduleId:'"+c.moduleId+"',smallPic:'"+c.smallPic+"',moduleName:'"+c.moduleName+'\'});" title="'+c.moduleName+'"><img src="'+_envRoot+"/styles/css/foundation/win8/v1.0/css/"+c.bigPic+'" border="0"/>'+c.moduleName+"</a></li>")}$("#commonUses").html(b.join(""))}).complete(function(){})}function showMenu(a){$.ajax({url:_envRoot+"/scripts/foundation/win8/v2.0/m"+a.moduleId+".json",type:"GET",dataType:"json",data:{mod_id:a.moduleId}}).done(function(b){showMenu2(a,b)}).complete(function(){})}function showMenu2(c,b){var a=[];a.push("<div class='panel panel-default'>");a.push("<div class='panel-heading'>");a.push("<h4 class='panel-title'>");a.push("<a data-toggle='collapse' data-toggle='collapse' data-parent='#accordion' href='#m"+c.moduleId+"'>");a.push("<img src='"+_envRoot+"/styles/css/foundation/win8/v1.0/css/"+c.smallPic+"' alt='' />"+c.moduleName+"</a>");a.push("</h4>");a.push("</div>");a.push("<div id='m"+c.moduleId+"' class='panel-collapse collapse'>");a.push("<div class='panel-body'>");a.push('<div id="t'+c.moduleId+'" class="ztree"></div>');a.push("</div>");a.push("</div>");a.push("</div>");$("#accordion").html(a.join(""));$.fn.zTree.init($("#t"+c.moduleId),setting,b);$(".panel-body").height($(window).height()-151)}$(function(){var c,a;var d=menuTree,e;showModule((d[0]).moduleId);var b=[];for(c=0,a=d.length;c<a;c++){e=d[c];b.push('<li><a href="javascript:showModule('+e.moduleId+");showAccordion("+e.moduleId+')">'+e.moduleName+"</a></li>")}$("#systems").html(b.join(""));$(window).resize(function(){$(".panel-body").height($(window).height()-228)});$(".panel-body").height($(window).height()-228)});